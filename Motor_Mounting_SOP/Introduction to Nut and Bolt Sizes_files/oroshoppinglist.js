(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroshoppinglist/templates/frontend-dialog/assign-dialog-actions.html":function(module,exports,__webpack_require__){var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="widget-actions">\n    <button class="btn" type="reset">\n        '+(null==(__t=_.__("oro.frontend.shoppinglist.dialog.cancel.label"))?"":_.escape(__t))+'\n    </button>\n    <button class="btn btn--info" type="submit">\n        '+(null==(__t=_.__("oro.frontend.shoppinglist.dialog.assign.label"))?"":_.escape(__t))+"\n    </button>\n</div>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroshoppinglist/templates/shopping-list-item-error.html":function(module,exports,__webpack_require__){var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<tr class="error-row" data-role="error-container">\n    <td colspan="6">\n        <span class="validation-error">'+(null==(__t=message)?"":__t)+"</span>\n    </td>\n</tr>\n";return __p}},"./bundles/oroshoppinglist/js/app/components/shopping-list-create-component.js":function(e,t,i){var s,o;s=[i("./bundles/oroui/js/widget/widget-manager.js"),i("./bundles/oroui/js/messenger.js"),i("./bundles/oroui/js/mediator.js"),i("./bundles/orotranslation/js/translator.js"),i("./bundles/oroui/js/extend/underscore.js")],void 0===(o=function(e,t,i,s,o){"use strict";return function(n){n.savedId&&e.getWidgetInstance(n._wid,function(e){n.message||(n.message=s("oro_frontend.widget_form_component.save_flash_success")),o.each(n.messages,function(e){t.notificationFlashMessage("success",e)},this),i.trigger("widget_success:"+e.getAlias(),n),i.trigger("widget_success:"+e.getWid(),n),e.trigger("formSave",{savedId:n.savedId,shoppingListCreateEnabled:n.shoppingListCreateEnabled}),e.disposed||e.remove()})}}.apply(t,s))||(e.exports=o)},"./bundles/oroshoppinglist/js/app/components/shoppinglist-collection-component.js":function(e,t,i){var s;i("../node_modules/core-js/modules/es.array.find.js"),i("../node_modules/core-js/modules/es.object.to-string.js"),void 0===(s=function(e){"use strict";var t=i("./bundles/oroui/js/app/components/base/component.js"),s=i("./bundles/oroui/js/app/models/base/collection.js"),o=i("./bundles/oroshoppinglist/js/shoppinglist-collection-service.js"),n=i("./bundles/oroui/js/mediator.js"),r=i("./bundles/oroui/js/extend/underscore.js");return t.extend({listen:{"shopping-list:line-items:update-response mediator":"_onLineItemsUpdate"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.collection=new s(e.shoppingLists),this.collection.comparator=this.comparator,this.collection.on("update",function(e,t){t.add&&n.trigger("shopping-list:refresh")}),this.collection.on("change",function(e){e&&e.refresh&&n.trigger("shopping-list:refresh")}),o.shoppingListCollection.resolve(this.collection)},comparator:function(e){return e.get("is_current")?0:e.get("id")},_onLineItemsUpdate:function(e,t){if(e&&t){if(t.message){var i=t.hasOwnProperty("successful")&&t.successful;n.execute("showFlashMessage",i?"success":"error",t.message)}var s=function(e){e&&!this.collection.find({id:e.id})&&this.collection.add(r.defaults(e,{is_current:!0}),{silent:!0})}.bind(this),o=function(e,t){e.set("shopping_lists",t.shopping_lists,{silent:!0}),e.trigger("change:shopping_lists")};t.product&&!r.isArray(e)?o(e,t.product):t.products&&r.isArray(e)&&(e=r.indexBy(e,"id"),r.each(t.products,function(t){e[t.id]&&o(e[t.id],t),r.each(t.shopping_lists,s)})),s(t.shoppingList),this.collection.trigger("change",{refresh:!0})}}})}.call(t,i,t,e))||(e.exports=s)},"./bundles/oroshoppinglist/js/app/components/shoppinglist-create-order-button-component.js":function(e,t,i){var s;i("../node_modules/core-js/modules/es.array.filter.js"),i("../node_modules/core-js/modules/es.object.to-string.js"),void 0===(s=function(e){"use strict";var t=i("./bundles/oroworkflow/js/app/components/button-component.js"),s=i("./bundles/oroui/js/standart-confirmation.js"),o=i("./bundles/orotranslation/js/translator.js"),n=i("./bundles/oroui/js/mediator.js"),r=t.extend({hasEmptyMatrix:null,shoppingListCollection:null,lineItemsCount:null,messages:{content:o("oro.shoppinglist.create_order_confirmation.message"),title:o("oro.shoppinglist.create_order_confirmation.title"),okText:o("oro.shoppinglist.create_order_confirmation.accept_button_title"),cancelText:o("oro.shoppinglist.create_order_confirmation.cancel_button_title")},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){return this.hasEmptyMatrix=e.hasEmptyMatrix,r.__super__.initialize.call(this,e)},_onLineItemsInit:function(e){this.lineItemsCount=e.filter(function(e){return-1===e.$el.attr("class").indexOf("--configurable")}).length},_onClickButtonExecutor:function(e){this.showConfirmation(r.__super__._onClickButtonExecutor.bind(this,e))},_onClickButtonRedirect:function(e){this.showConfirmation(r.__super__._onClickButtonRedirect.bind(this,e))},showConfirmation:function(e){this.isConfirmationNeeded()?e():new s(this.messages).off("ok").on("ok").open(e)},isConfirmationNeeded:function(){var e;try{e=!n.execute("shoppinglist:hasEmptyMatrix")}catch(t){e=!this.hasEmptyMatrix}return e}});return r}.call(t,i,t,e))||(e.exports=s)},"./bundles/oroshoppinglist/js/app/components/shoppinglist-notes-editable-view-component.js":function(e,t,i){"use strict";i.r(t);i("../node_modules/core-js/modules/es.object.keys.js"),i("../node_modules/core-js/modules/es.symbol.js"),i("../node_modules/core-js/modules/es.array.filter.js"),i("../node_modules/core-js/modules/es.object.to-string.js"),i("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),i("../node_modules/core-js/modules/web.dom-collections.for-each.js"),i("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var s=i("../node_modules/@babel/runtime/helpers/defineProperty.js"),o=i.n(s),n=i("./bundles/oroui/js/app/components/view-component.js"),r=i.n(n),l=i("./bundles/oroshoppinglist/js/app/models/shoppinglist-notes-editable-model.js");function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach(function(t){o()(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var u=r.a.extend({constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){e.model=new l.a({id:e.shoppingListId,routingOptions:a({},e.routingOptions),notes:e.notes}),u.__super__.initialize.call(this,e)}});t.default=u},"./bundles/oroshoppinglist/js/app/components/shoppinglist-widget-view-component.js":function(e,t,i){var s,o=i("../node_modules/@babel/runtime/helpers/defineProperty.js");i("../node_modules/core-js/modules/es.array.concat.js"),i("../node_modules/core-js/modules/es.array.find.js"),i("../node_modules/core-js/modules/es.object.to-string.js"),void 0===(s=function(e){"use strict";var t=i("./bundles/oroui/js/app/components/view-component.js"),s=i("./bundles/oroui/js/mediator.js"),n=i("./bundles/fosjsrouting/js/router.js"),r=i("./bundles/oroui/js/extend/jquery.js"),l=i("./bundles/oroui/js/extend/underscore.js").debounce,d=i("./bundles/orotranslation/js/translator.js"),a=i("./bundles/oroshoppinglist/js/shoppinglist-collection-service.js"),u=t.extend({shoppingListCollection:null,elements:{radio:'[data-role="set-default"]'},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){var t=this;this.$el=e._sourceElement,u.__super__.initialize.call(this,e),this.$el.on("change.".concat(this.cid),this.elements.radio,l(this._onCurrentShoppingListChange.bind(this),300)),this.$shoppingListWidget=this.$el.closest(".shopping-list-widget"),this.bindShoppingListWidgetEvents(),a.shoppingListCollection.done(function(e){t.shoppingListCollection=e})},bindShoppingListWidgetEvents:function(){var e,t=this;this.$shoppingListWidget.on((o(e={},"mouseenter.".concat(this.cid," click.").concat(this.cid),function(e){var t=r(e.currentTarget);t.hasClass("show")||(t.find('[data-toggle="dropdown"]').dropdown("bindKeepFocusInside"),t.addClass("show-by-hover"))}),o(e,"mouseleave.".concat(this.cid," hidden.bs.dropdown.").concat(this.cid),function(e){var i=r(e.currentTarget);i.hasClass("show")&&!t.hasFocus(i.find(".header-row__toggle"))&&i.find('[data-toggle="dropdown"]').dropdown("unbindKeepFocusInside"),i.removeClass("show-by-hover")}),o(e,"focusin.".concat(this.cid),function(e){var i=r(e.currentTarget);!i.hasClass("show")&&t.hasFocus(i.find(".header-row__toggle"))&&(i.attr("data-skip-focus-decoration-inner-elements",""),setTimeout(function(){i.removeClass("show-by-hover"),i.find('[data-toggle="dropdown"]').dropdown("toggle"),i.removeAttr("data-skip-focus-decoration-inner-elements")},0))}),o(e,"focusout.".concat(this.cid),function(e){var t=r(e.currentTarget);t.hasClass("show")&&e.relatedTarget&&!r.contains(e.currentTarget,e.relatedTarget)&&t.find('[data-toggle="dropdown"]').dropdown("toggle")}),e))},hasFocus:function(e){return r.contains(r(e)[0],document.activeElement)},_onCurrentShoppingListChange:function(e){var t=this,i=parseInt(r(e.target).val(),10),o=r(e.target).data("label");r.ajax({method:"PUT",url:n.generate("oro_api_set_shopping_list_current",{id:i}),success:function(){t.shoppingListCollection.each(function(e){e.set("is_current",e.get("id")===i,{silent:!0})}),t.shoppingListCollection.trigger("change");var e=d("oro.shoppinglist.actions.shopping_list_set_as_default",{shoppingList:o});s.execute("showFlashMessage","success",e),s.trigger("layout-subtree:update:shopping_list_set_default"),s.trigger("layout-subtree:update:shopping_list_owner")}})},dispose:function(){this.disposed||(this.$el.off(".".concat(this.cid)),this.$shoppingListWidget.off(".".concat(this.cid)),delete this.shoppingListCollection,delete this.$shoppingListWidget,u.__super__.dispose.call(this))}});return u}.call(t,i,t,e))||(e.exports=s)},"./bundles/oroshoppinglist/js/app/views/matrix-grid-add-to-shopping-list-view.js":function(e,t,i){var s;i("../node_modules/core-js/modules/es.object.to-string.js"),i("../node_modules/core-js/modules/es.array.find.js"),void 0===(s=function(e){"use strict";var t=i("./bundles/oroshoppinglist/js/app/views/product-add-to-shopping-list-view.js"),s=i("./bundles/oroui/js/extend/underscore.js"),o=t.extend({constructor:function e(t){e.__super__.constructor.call(this,t)},_saveLineItem:function(e,t,i){return this._addLineItem(e,t,i)},_addLineItem:function(e,t,i){return"oro_shopping_list_frontend_matrix_grid_order",o.__super__._addLineItem.call(this,"oro_shopping_list_frontend_matrix_grid_order",t,i)},validate:function(e,t,i,n){if(!o.__super__.validate.call(this,t,i,n))return!1;if("update"===e||"remove"===e||this.options.emptyMatrixAllowed)return!0;if(s.every(this.$form.find('[data-name="field__quantity"]:enabled'),function(e){return s.isEmpty(e.value)})){var r=this.$form.validate();return r.errorsFor(this.$form[0]).remove(),r.showLabel(this.$form[0],s.__("oro.product.validation.configurable.required")),!1}return!0}});return o}.call(t,i,t,e))||(e.exports=s)},"./bundles/oroshoppinglist/js/app/views/matrix-grid-popup-button-view.js":function(e,t,i){var s;void 0===(s=function(e){"use strict";var t=i("./bundles/oroshoppinglist/js/app/views/product-add-to-shopping-list-view.js"),s=i("./bundles/oroshoppinglist/js/app/widget/matrix-grid-order-widget.js");return t.extend({constructor:function e(t){e.__super__.constructor.call(this,t)},_openMatrixGridPopup:function(e){this.subview("popup",new s({model:this.model,shoppingListId:e})),this.subview("popup").render()},_saveLineItem:function(e,t,i){this._openMatrixGridPopup(t.shoppingListId)},_addLineItem:function(e,t,i){this._openMatrixGridPopup(t.shoppingListId)}})}.call(t,i,t,e))||(e.exports=s)},"./bundles/oroshoppinglist/js/app/views/product-add-to-shopping-list-view.js":function(e,t,i){var s;i("../node_modules/core-js/modules/es.array.iterator.js"),i("../node_modules/core-js/modules/es.object.to-string.js"),i("../node_modules/core-js/modules/web.dom-collections.iterator.js"),i("../node_modules/core-js/modules/es.array.find.js"),i("../node_modules/core-js/modules/es.array.sort.js"),i("../node_modules/core-js/modules/web.url.to-json.js"),i("../node_modules/core-js/modules/es.array.filter.js"),void 0===(s=function(e){"use strict";var t=i("./bundles/oroui/js/app/views/base/view.js"),s=i("./bundles/orofrontend/js/app/elements-helper.js"),o=i("./bundles/oroshoppinglist/js/app/widget/shopping-list-create-widget.js"),n=i("./bundles/oroui/js/tools/api-accessor.js"),r=i("./bundles/fosjsrouting/js/router.js"),l=i("./bundles/oroui/js/mediator.js"),d=i("./bundles/oroui/js/extend/jquery.js"),a=i("./bundles/oroui/js/extend/underscore.js"),u=i("./bundles/oroproduct/js/app/quantity-helper.js"),p=i("./bundles/oroshoppinglist/js/shoppinglist-collection-service.js"),c=t.extend(a.extend({},s,{options:{emptyMatrixAllowed:!1,buttonTemplate:"",createNewButtonTemplate:"",removeButtonTemplate:"",shoppingListCreateEnabled:!0,showSingleAddToShoppingListButton:!0,buttonsSelector:".add-to-shopping-list-button",quantityField:'[data-name="field__quantity"]',messages:{success:"oro.form.inlineEditing.successMessage"},save_api_accessor:{http_method:"PUT",route:"oro_api_shopping_list_frontend_put_line_item",form_name:"oro_product_frontend_line_item"}},dropdownWidget:null,shoppingListCollection:null,modelAttr:{shopping_lists:[]},rendered:!1,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){c.__super__.initialize.call(this,e),this.deferredInitializeCheck(e,["productModel","dropdownWidget"])},deferredInitialize:function(e){this.options=d.extend(!0,{},this.options,a.pick(e,a.keys(this.options))),this.dropdownWidget=e.dropdownWidget,this.$form=this.dropdownWidget.element.closest("form"),this.initModel(e),this.options.buttonTemplate&&(this.options.buttonTemplate=a.template(this.options.buttonTemplate)),this.options.removeButtonTemplate&&(this.options.removeButtonTemplate=a.template(this.options.removeButtonTemplate)),this.options.createNewButtonTemplate&&(this.options.createNewButtonTemplate=a.template(this.options.createNewButtonTemplate)),this.saveApiAccessor=new n(this.options.save_api_accessor),this.model&&(this.model.on("change:unit",this._onUnitChanged,this),this.model.on("editLineItem",this._onEditLineItem,this)),this.$form.find(this.options.quantityField).on("keydown",a.bind(this._onQuantityEnter,this)),p.shoppingListCollection.done(a.bind(function(e){this.shoppingListCollection=e,this.listenTo(e,"change",this._onCollectionChange),this.render()},this))},initModel:function(e){var t=a.each(e.modelAttr,function(t,i){e.modelAttr[i]="undefined"===t?void 0:t})||{};this.modelAttr=d.extend(!0,{},this.modelAttr,t),e.productModel&&(this.model=e.productModel),this.model&&(a.each(this.modelAttr,function(e,i){this.model.has(i)&&void 0===t[i]||this.model.set(i,e)},this),void 0===this.model.get("shopping_lists")&&this.model.set("shopping_lists",[]))},render:function(){this._setEditLineItem(null,!0);var e=this._collectAllButtons();this._getContainer().html(e)},_onCollectionChange:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.length>0&&void 0!==t[0].shoppingListCreateEnabled&&(this.options.shoppingListCreateEnabled=t[0].shoppingListCreateEnabled),this._setEditLineItem();var s=this._collectAllButtons();this._clearButtons(),this._getContainer().prepend(s),this.dropdownWidget._renderButtons()},_clearButtons:function(){this._getContainer().trigger("disposeLayout").find(this.options.buttonsSelector).remove()},_getContainer:function(){return this.dropdownWidget.element.find(".btn-group:first")},_collectAllButtons:function(){var e=[];if(!this.shoppingListCollection.length)return this.options.showSingleAddToShoppingListButton?[d(this.options.buttonTemplate({id:null,label:a.__("oro.shoppinglist.entity_label")})).find(this.options.buttonsSelector)]:[];var t=this.findCurrentShoppingList();if(this._addShippingListButtons(e,t),this.shoppingListCollection.sort(),this.shoppingListCollection.each(function(i){var s=i.toJSON();s.id!==t.id&&this._addShippingListButtons(e,s)},this),this.options.shoppingListCreateEnabled){var i=d(this.options.createNewButtonTemplate({id:null,label:""}));i=this.updateLabel(i,null),e.push(i)}if(1===e.length){var s=this.dropdownWidget.options.decoreClass||"";e=a.first(e).find(this.options.buttonsSelector).addClass(s)}return e},_addShippingListButtons:function(e,t){var i=d(this.options.buttonTemplate(t));if(this.model){var s=this.findShoppingListByIdAndUnit(t,this.model.get("unit"));if(s&&(i=this.updateLabel(i,t,s)),e.push(i),s){var o=d(this.options.removeButtonTemplate(t));o.find("a").attr("data-intention","remove"),e.push(o)}}else e.push(i)},_afterRenderButtons:function(){this.initButtons(),this.rendered=!0},initButtons:function(){this.findAllButtons().attr("role","button").off("click"+this.eventNamespace()).on("click"+this.eventNamespace(),a.bind(this.onClick,this))},findDropdownButtons:function(e){var t=(this.dropdownWidget.element||this.dropdownWidget.dropdown).find(this.options.buttonsSelector);return e&&(t=t.filter(e)),t},findMainButton:function(){return this.dropdownWidget.main&&this.dropdownWidget.main.is(this.options.buttonsSelector)?this.dropdownWidget.main:d([])},findAllButtons:function(e){var t=this.findMainButton().add(this.findDropdownButtons());return e&&(t=t.filter(e)),t},findShoppingListById:function(e){return this.model&&a.find(this.model.get("shopping_lists"),{id:e.id})||null},findShoppingListByIdAndUnit:function(e,t){var i=this.findShoppingListById(e);return i&&a.find(i.line_items,{unit:t})?i:null},findShoppingListLineItemByUnit:function(e,t){var i=this.findShoppingListById(e);return i?a.find(i.line_items,{unit:t}):null},_onQuantityEnter:function(e){if(13===e.keyCode){this.model.set({quantity:u.getQuantityNumberOrDefaultValue(d(e.target).val(),NaN)});var t=this.findMainButton();t.length||(t=this.findAllButtons()),t.click()}},findCurrentShoppingList:function(){return this.shoppingListCollection.find({is_current:!0}).toJSON()||null},findShoppingList:function(e){return e=parseInt(e,10),this.shoppingListCollection.find({id:e}).toJSON()||null},validate:function(){return this.dropdownWidget.validateForm()},onClick:function(e){var t=d(e.currentTarget);if(t.data("disabled"))return!1;var i=t.data("url"),s=t.data("intention"),o=this.$form.serialize(),n={shoppingListId:t.data("shoppinglist").id},r=!0;this.model&&(n.productId=this.model.get("id"),r=0!==n.productId,this.model.has("parentProduct")&&(n.parentProductId=this.model.get("parentProduct"))),this.validate()&&r&&("new"===s?this._createNewShoppingList(i,n,o):"update"===s?this._saveLineItem(i,n,o):"remove"===s?this._removeLineItem(i,n,o):this._addLineItem(i,n,o))},updateLabel:function(e,t,i){var s,o;t&&i?(s=a.__("oro.shoppinglist.actions.update_shopping_list",{shoppingList:t.label}),o="update"):t?(s=a.__("oro.shoppinglist.actions.add_to_shopping_list",{shoppingList:t.label}),o="add"):(s=a.__("oro.shoppinglist.widget.add_to_new_shopping_list"),o="new");var n=e.find("a"),r=e.find(".fa").clone();return n.text(s).attr("data-intention",o),r.length&&n.prepend(r),e},_setEditLineItem:function(e,t){if(this.editLineItem=null,this.model&&this.shoppingListCollection.length){var i=this.findCurrentShoppingList(),s=this.findShoppingListById(i);if(s){e?this.editLineItem=a.findWhere(s.line_items,{id:e}):t?this.editLineItem=s.line_items[0]||null:this.model.get("quantity_changed_manually")||(this.editLineItem=a.findWhere(s.line_items,{unit:this.model.get("unit")})||null);var o=this.editLineItem;o&&(this.model.set("unit",o.unit),this.model.set("quantity",o.quantity),this.model.set("quantity_changed_manually",!0))}}},_createNewShoppingList:function(e,t,i){if(!this.model||this.model.get("line_item_form_enable")){var s=new o({});s.on("formSave",a.bind(function(s){t.shoppingListId=s.savedId,this._addLineItem(e,t,i)},this)),s.render()}},_addProductToShoppingList:function(e,t,i){if(!this.model||this.model.get("line_item_form_enable")){var s=this;l.execute("showLoading"),d.ajax({type:"POST",url:r.generate(e,t),data:i,success:function(e){l.trigger("shopping-list:line-items:update-response",s.model,e)},complete:function(){l.execute("hideLoading")}})}},_removeProductFromShoppingList:function(e,t,i){if(!this.model||this.model.get("line_item_form_enable")){var s=this;l.execute("showLoading"),d.ajax({type:"DELETE",url:r.generate(e,t),data:i,success:function(e){l.trigger("shopping-list:line-items:update-response",s.model,e)},complete:function(){l.execute("hideLoading")}})}},_onUnitChanged:function(){this._setEditLineItem(),this.rendered&&this._onCollectionChange()},_onEditLineItem:function(e){this._setEditLineItem(e),this.model.trigger("focus:quantity")},_addLineItem:function(e,t,i){this._addProductToShoppingList(e,t,i)},_removeLineItem:function(e,t,i){this._removeProductFromShoppingList(e,t,i)},_saveLineItem:function(e,t,i){if(!this.model||this.model.get("line_item_form_enable")){l.execute("showLoading");var s=this.findShoppingList(t.shoppingListId),o=this.findShoppingListLineItemByUnit(s,this.model.get("unit"));this.saveApiAccessor.send({id:o.id},{quantity:u.formatQuantity(this.model.get("quantity")),unit:this.model.get("unit")}).done(a.bind(function(e){o.quantity=e.quantity,o.unit=e.unit,this.shoppingListCollection.trigger("change",{refresh:!0}),l.execute("showFlashMessage","success",a.__(this.options.messages.success))},this)).always(function(){l.execute("hideLoading")})}},dispose:function(e){delete this.dropdownWidget,delete this.modelAttr,delete this.shoppingListCollection,delete this.editLineItem,delete this.$form,l.off(null,null,this),this.model&&this.model.off(null,null,this),c.__super__.dispose.call(this)}}));return c}.call(t,i,t,e))||(e.exports=s)},"./bundles/oroshoppinglist/js/app/views/product-quick-add-to-shopping-list-view.js":function(e,t,i){var s;i("../node_modules/core-js/modules/es.array.find.js"),i("../node_modules/core-js/modules/es.object.to-string.js"),void 0===(s=function(e){"use strict";var t=i("./bundles/oroshoppinglist/js/app/views/product-add-to-shopping-list-view.js"),s=i("./bundles/oroui/js/mediator.js"),o=t.extend({constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){o.__super__.initialize.call(this,e),this.options.quickAddComponentPrefix=e.quickAddComponentPrefix},_addProductToShoppingList:function(e,t,i){s.trigger(this.options.quickAddComponentPrefix+":submit","oro_shopping_list_quick_add_processor",t.shoppingListId)},onClick:function(e){e.preventDefault(),e.stopPropagation(),this.formHasErrors()||o.__super__.onClick.call(this,e)},formHasErrors:function(){return!this.$form.validate().valid()||this.$form.find(".product-autocomplete-error .validation-failed:visible").length}});return o}.call(t,i,t,e))||(e.exports=s)},"./bundles/oroshoppinglist/js/app/views/product-shopping-lists-view.js":function(e,t,i){var s;i("../node_modules/core-js/modules/es.array.find.js"),i("../node_modules/core-js/modules/es.object.to-string.js"),i("../node_modules/core-js/modules/web.url.to-json.js"),void 0===(s=function(e){"use strict";var t=i("./bundles/oroui/js/app/views/base/view.js"),s=i("./bundles/orofrontend/js/app/elements-helper.js"),o=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/extend/jquery.js"),r=i("./bundles/oroui/js/mediator.js"),l=i("./bundles/oroshoppinglist/js/shoppinglist-collection-service.js"),d=t.extend(o.extend({},s,{options:{template:""},modelAttr:{shopping_lists:[]},modelEvents:{shopping_lists:["change","render"]},shoppingListCollection:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){d.__super__.initialize.call(this,e),this.options=o.defaults(e||{},this.options),this.options.template=o.template(this.options.template),this.initModel(e),this.model&&(this.initializeElements(e),l.shoppingListCollection.done(function(e){this.shoppingListCollection=e,this.listenTo(e,"change",this.render),this.render()}.bind(this)))},initModel:function(e){var t=o.each(e.modelAttr,function(t,i){e.modelAttr[i]="undefined"===t?void 0:t})||{};this.modelAttr=n.extend(!0,{},this.modelAttr,t),e.productModel&&(this.model=e.productModel),o.each(this.modelAttr,function(e,i){this.model.has(i)&&void 0===t[i]||this.model.set(i,e)},this),void 0===this.model.get("shopping_lists")&&this.model.set("shopping_lists",[])},dispose:function(){this.disposeElements(),delete this.shoppingListCollection,d.__super__.dispose.call(this)},delegateEvents:function(e){d.__super__.delegateEvents.call(this,e),this.delegateElementsEvents()},undelegateEvents:function(){return this.undelegateElementsEvents(),d.__super__.undelegateEvents.call(this)},render:function(){this.clearElementsCache(),this.updateShoppingLists(),this.initLayout({options:{productModel:this.model}}),r.trigger("layout:adjustHeight")},updateShoppingLists:function(){var e=this.model.get("shopping_lists"),t=n(this.options.template({currentShoppingList:this.findCurrentShoppingList(e),shoppingListsCount:e&&e.length||0}));this.$el.html(t),this.delegateEvents()},findCurrentShoppingList:function(e){var t=o.find(e,function(e){var t=this.shoppingListCollection.get(e.id);return t&&t.get("is_current")},this)||null;return t?o.extend({},{line_items:t.line_items},this.shoppingListCollection.get(t.id).toJSON()):null}}));return d}.call(t,i,t,e))||(e.exports=s)},"./bundles/oroshoppinglist/js/app/views/shopping-list-assign-link-view.js":function(e,t,i){var s;i("../node_modules/core-js/modules/es.array.concat.js"),void 0===(s=function(e){"use strict";var t=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/extend/jquery.js"),o=i("./bundles/oroui/js/mediator.js"),n=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroshoppinglist/templates/frontend-dialog/assign-dialog-actions.html"),r=i("./bundles/oroui/js/app/views/base/view.js"),l=i("./bundles/orofrontend/js/app/components/frontend-dialog-widget.js"),d=r.extend({optionNames:r.prototype.optionNames.concat(["dialogUrl","dialogClass","dialogTitle","contentElement","ownerElement","shoppingListOwnerChangeUrl"]),events:{click:"_onClick"},dialogUrl:null,dialogClass:"shopping-list-assign-dialog-widget",dialogTitle:null,contentElement:".shopping-list-assign-grid",ownerElement:'input[name="assigned"]:checked',shoppingListOwnerChangeUrl:null,constructor:function e(t){return e.__super__.constructor.call(this,t)},initialize:function(e){d.__super__.initialize.call(this,e)},renderDialogWidget:function(){this.subview("popup",new l({autoRender:!0,url:this.dialogUrl,title:this.dialogTitle,contentElement:this.contentElement,simpleActionTemplate:!1,renderActionsFromTemplate:!0,actionsTemplate:n,staticPage:!1,fullscreenMode:!1,dialogOptions:{modal:!0,resizable:!0,autoResize:!0,width:800,dialogClass:this.dialogClass}})),this.listenToOnce(this.subview("popup"),{"frontend-dialog:accept":this._onShoppingListOwnerChange.bind(this)})},_onClick:function(e){e.preventDefault(),this.renderDialogWidget()},_onShoppingListOwnerChange:function(){var e=s(this.ownerElement).val();s.ajax({method:"PUT",url:this.shoppingListOwnerChangeUrl,data:{ownerId:e},success:this._onAjaxSuccess.bind(this)})},_onAjaxSuccess:function(e){o.execute("showFlashMessage","success",t.escape(e)),o.trigger("layout-subtree:update:shopping_list_owner",{layoutSubtreeFailCallback:this._checkPermissions.bind(this)}),o.trigger("shopping-list:refresh")},_checkPermissions:function(e){403===e.status&&window.location.reload()}});return d}.call(t,i,t,e))||(e.exports=s)},"./bundles/oroshoppinglist/js/app/views/shoppinglist-widget-view.js":function(e,t,i){var s;i("../node_modules/core-js/modules/es.array.find.js"),i("../node_modules/core-js/modules/es.object.to-string.js"),void 0===(s=function(e){"use strict";var t=i("./bundles/oroui/js/app/views/base/view.js"),s=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroshoppinglist/js/shoppinglist-collection-service.js"),r=t.extend({options:{currentClass:""},shoppingListCollection:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){r.__super__.initialize.call(this,e),this.options=s.defaults(e||{},this.options),this.$el=o(this.options._sourceElement),n.shoppingListCollection.done(s.bind(function(e){this.shoppingListCollection=e,this.listenTo(e,"change",this.render),this.render()},this))},dispose:function(){if(!this.disposed)return delete this.shoppingListCollection,r.__super__.dispose.call(this)},render:function(){var e=this.$el.closest(".shopping-list-widget"),t=this.shoppingListCollection.length||e.find(".shopping-list-widget__create-btn").length;e.toggleClass("shopping-list-widget--disabled",!t),e.find(".header-row__trigger").toggleClass("disabled",!t).attr("disabled",!t)}});return r}.call(t,i,t,e))||(e.exports=s)},"./bundles/oroshoppinglist/js/app/widget/product-shopping-lists-widget.js":function(e,t,i){var s,o=i("../node_modules/@babel/runtime/helpers/toConsumableArray.js");i("../node_modules/core-js/modules/es.array.filter.js"),i("../node_modules/core-js/modules/es.object.to-string.js"),i("../node_modules/core-js/modules/es.array.map.js"),i("../node_modules/core-js/modules/web.url.to-json.js"),i("../node_modules/core-js/modules/es.array.find.js"),i("../node_modules/core-js/modules/es.array.iterator.js"),i("../node_modules/core-js/modules/web.dom-collections.iterator.js"),void 0===(s=function(e){"use strict";var t=i("./bundles/orowindows/js/widget/dialog-widget.js"),s=i("./bundles/orofrontend/js/app/elements-helper.js"),n=i("./bundles/oroproduct/js/app/units-util.js"),r=i("./bundles/oroui/js/tools/api-accessor.js"),l=i("./bundles/oroui/js/mediator.js"),d=i("./bundles/fosjsrouting/js/router.js"),a=i("./bundles/orotranslation/js/translator.js"),u=i("./bundles/oroui/js/extend/underscore.js"),p=i("./bundles/oroui/js/extend/jquery.js"),c=i("./bundles/oroshoppinglist/js/shoppinglist-collection-service.js"),h=i("./bundles/oroproduct/js/app/quantity-helper.js"),g=t.extend(u.extend({},s,{options:p.extend(!0,{},t.prototype.options,{actionWrapperTemplate:u.template('<div class="action-wrapper"/>'),preventModelRemoval:!0,template:"",dialogOptions:{modal:!0,resizable:!1,width:"100%",maxWidth:580,autoResize:!0},update_api_accessor:{http_method:"PUT",route:"oro_api_shopping_list_frontend_put_line_item"},singleUnitMode:!1,singleUnitModeCodeVisible:!1,configDefaultUnit:""}),messages:{processingMessage:a("oro.form.inlineEditing.saving_progress"),preventWindowUnload:a("oro.form.inlineEditing.inline_edits")},elements:{edit:'[data-role="edit"]',decline:'[data-role="decline"]',lineItem:'[data-role="line-item"]',lineItemEdit:'[data-role="line-item-edit"]',lineItemView:'[data-role="line-item-view"]',addForm:'[data-role="add-form"]',addFormShoppingList:'[data-role="add-form-shopping-list"]',addFormQty:'[data-role="add-form-qty"]',addFormUnit:'[data-role="add-form-unit"]',addFormAccept:'[data-role="add-form-accept"]',addFormReset:'[data-role="add-form-reset"]'},elementsEvents:{edit:["click","edit"],decline:["click","decline"],addFormShoppingList:["change","onAddFormShoppingListChange"],addFormUnit:["change","onAddFormUnitChange"],addFormAccept:["click","onAddFormAccept"],addFormReset:["click","onAddFormReset"]},modelAttr:{shopping_lists:[]},shoppingListCollection:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=p.extend(!0,{},this.options,u.pick(e,["dialogOptions","template","quantityComponentOptions","singleUnitMode","singleUnitModeCodeVisible","configDefaultUnit"])),this.initModel(e),this.model&&(this.initializeElements(e),this.options.title=this.model.get("name"),this.options.url=e.url=!1,this.options.template=e.template=u.template(this.options.template),l.on("frontend:item:delete",this.onLineItemDelete,this),l.on("product:quantity-unit:update",this.onLineItemUpdate,this),c.shoppingListCollection.done(function(t){this.shoppingListCollection=t,this.listenTo(t,"change",this.render),g.__super__.initialize.call(this,e)}.bind(this)))},initModel:function(e){this.modelAttr=p.extend(!0,{},this.modelAttr,e.modelAttr||{}),e.productModel&&(this.model=e.productModel),u.each(this.modelAttr,function(e,t){this.model.has(t)||this.model.set(t,e)},this)},dispose:function(){this.disposed||(this.disposeElements(),delete this.shoppingListCollection,l.off(null,null,this),g.__super__.dispose.call(this))},delegateEvents:function(e){g.__super__.delegateEvents.call(this,e),this.delegateElementsEvents()},undelegateEvents:function(){return this.undelegateElementsEvents(),g.__super__.undelegateEvents.call(this)},render:function(){this.clearElementsCache();var e=this.model.get("shopping_lists").map(function(e){var t=this.shoppingListCollection.get(e.id);return!!t&&u.extend({},{line_items:e.line_items,href:d.generate("oro_shopping_list_frontend_view",{id:e.id})},t.toJSON())}.bind(this)).filter(function(e){return!!e});if(!u.isEmpty(e)&&this.shoppingListCollection)return this.setElement(p(this.options.template({shoppingLists:e,shoppingListsCollection:this.shoppingListCollection,productUnits:n.getUnitsLabel(this.model),productUnitPrecisions:this.model.get("product_units"),unit:this.model.get("unit"),precision:this.model.get("product_units")[this.model.get("unit")],singleUnitMode:this.options.singleUnitMode,singleUnitModeCodeVisible:this.options.singleUnitModeCodeVisible,isProductApplySingleUnitMode:u.bind(this.isProductApplySingleUnitMode,this),QuantityHelper:h}))),g.__super__.render.call(this);this.dispose()},isProductApplySingleUnitMode:function(e){return!(!this.options.singleUnitMode||1!==e.length)&&e[0]===this.options.configDefaultUnit},onLineItemDelete:function(e){var t=this.model.get("shopping_lists");t=u.filter(t,function(t,i){return t.line_items=u.filter(t.line_items,function(t){return t.id!==e.lineItemId}),!u.isEmpty(t.line_items)},this),this.model.set("shopping_lists",t,{silent:!0}),this.model.trigger("change:shopping_lists"),this.shoppingListCollection.trigger("change",{refresh:!0})},onLineItemUpdate:function(e){var t=this.updateShoppingLists(this.model.get("shopping_lists"),e.shoppingListId,e.lineItemId,e.value);this.model.set("shopping_lists",t,{silent:!0}),this.model.trigger("change:shopping_lists"),this.shoppingListCollection.trigger("change",{refresh:!0}),e.event&&this.toggleEditMode(e.event,"disable")},onAddFormReset:function(){var e=this.getElement("addForm");e[0].reset(),e.find("select").inputWidget("refresh")},onAddFormShoppingListChange:function(e){var t=this.getElement("addFormQty"),i=this.getSelectedShoppingList(),s=this.getSelectedUnit(),o=this.getMinimumQuantity(s);i&&i.line_items&&(o=i.line_items[0].quantity,this.setSelectedUnit(i.line_items[0].unit)),t.val(h.formatQuantity(o))},onAddFormUnitChange:function(e){var t=this.getElement("addFormQty"),i=this.getSelectedShoppingList(),s=this.getSelectedUnit(),o=this.getMinimumQuantity(s);if(i&&i.line_items){var n=u.findWhere(i.line_items,{unit:s});n&&n.quantity&&(o=n.quantity)}var r=this.model.get("product_units")[s]||0;t.data("precision",r).inputWidget("refresh"),t.val(h.formatQuantity(o))},onAddFormAccept:function(){var e=this.getElement("addFormQty"),t=this.getSelectedShoppingList(),i=this.getSelectedUnit();if(!t)return!1;var s=h.getQuantityNumberOrDefaultValue(e.val());if(t.line_items){var o=u.findWhere(t.line_items,{unit:i});o?this.updateLineItem(o,t.id,s):this.saveLineItem(t.id,this.getSelectedUnit(),s)}else this.saveLineItem(t.id,this.getSelectedUnit(),s)},onSaveError:function(e){var t=[];switch("responseJSON"in e?e.responseJSON.code:e.status){case 400:var i=e.responseJSON.errors.children;for(var s in i)i.hasOwnProperty(s)&&i[s].errors&&t.push.apply(t,o(u.values(i[s].errors)));t.length||t.push(a("oro.ui.unexpected_error"));break;case 403:t.push(a("You do not have permission to perform this action."));break;default:t.push(a("oro.ui.unexpected_error"))}u.each(t,function(e){l.execute("showFlashMessage","error",e)})},updateShoppingLists:function(e,t,i,s){return u.map(e,function(e){return e.id===parseInt(t,10)&&(e.line_items=this.updateLineItems(e.line_items,i,s)),e},this)},saveLineItem:function(e,t,i){var s=this,o={},n=this.getElement("addForm").serialize();this.model&&(o.productId=this.model.get("id")),o.shoppingListId=e,l.execute("showLoading"),p.ajax({type:"POST",url:d.generate("oro_shopping_list_frontend_add_product",o),data:n,success:function(e){if(l.execute("hideLoading"),e&&e.message){var t=e.hasOwnProperty("successful")&&e.successful;l.execute("showFlashMessage",t?"success":"error",e.message)}e.product&&e.product.shopping_lists&&(s.model.set("shopping_lists",e.product.shopping_lists,{silent:!0}),s.model.trigger("change:shopping_lists"),s.shoppingListCollection.trigger("change",{refresh:!0}))},error:function(e){l.execute("hideLoading")}})},updateLineItem:function(e,t,i){var s=new r(u.extend(this.options.update_api_accessor,{default_route_parameters:{id:e.id}})),o={quantity:i,unit:e.unit},n=u.clone(o);n.quantity=h.formatQuantity(n.quantity,null,!0),s.send(n,{oro_product_frontend_line_item:n},{},{processingMessage:this.messages.processingMessage,preventWindowUnload:this.messages.preventWindowUnload}).done(u.bind(this.onLineItemUpdate,this,{shoppingListId:t,lineItemId:e.id,value:o})).fail(u.bind(this.onSaveError,this))},updateLineItems:function(e,t,i){return u.map(e,function(e){return e.id===parseInt(t,10)&&(e.unit=i.unit,e.quantity=i.quantity),e})},toggleEditMode:function(e,t){var i=p(e.currentTarget);"enable"===t?(i.closest(this.elements.lineItem).find(this.elements.lineItemView).addClass("hidden"),i.closest(this.elements.lineItem).find(this.elements.lineItemEdit).removeClass("hidden")):(i.closest(this.elements.lineItem).find(this.elements.lineItemEdit).addClass("hidden"),i.closest(this.elements.lineItem).find(this.elements.lineItemView).removeClass("hidden"))},getSelectedShoppingListId:function(){return parseInt(this.getElement("addFormShoppingList").val(),10)||0},getSelectedShoppingList:function(){var e={id:this.getSelectedShoppingListId()};if(e.id)return u.findWhere(this.model.get("shopping_lists"),e)||this.shoppingListCollection.find(e)},getSelectedUnit:function(){return this.getElement("addFormUnit").val()},setSelectedUnit:function(e){this.getElement("addFormUnit").val(e).inputWidget("refresh")},getMinimumQuantity:function(e){var t=1,i=u.filter(this.model.get("prices")||{},function(t){return t.unit===e});return i.length&&(t=u.min(i,"quantity").quantity),t},edit:function(e){this.toggleEditMode(e,"enable")},decline:function(e){this.toggleEditMode(e,"disable")}}));return g}.call(t,i,t,e))||(e.exports=s)},"./bundles/oroshoppinglist/js/datagrid/builder/shoppinglist-flat-data-builder.js":function(e,t,i){"use strict";i.r(t),i.d(t,"flattenData",function(){return I});i("../node_modules/core-js/modules/es.object.keys.js"),i("../node_modules/core-js/modules/es.symbol.js"),i("../node_modules/core-js/modules/es.array.filter.js"),i("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),i("../node_modules/core-js/modules/web.dom-collections.for-each.js"),i("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js");var s=i("../node_modules/@babel/runtime/helpers/toConsumableArray.js"),o=i.n(s),n=i("../node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),r=i.n(n),l=i("../node_modules/@babel/runtime/helpers/defineProperty.js"),d=i.n(l),a=(i("../node_modules/core-js/modules/es.object.to-string.js"),i("../node_modules/core-js/modules/es.array.join.js"),i("../node_modules/core-js/modules/es.function.name.js"),i("../node_modules/core-js/modules/es.object.assign.js"),i("./bundles/oroui/js/extend/underscore.js")),u=i.n(a),p=i("./bundles/oroshoppinglist/js/datagrid/plugins/filtered-product-variants-plugin.js"),c=i("./bundles/oroui/js/mediator.js"),h=i.n(c),g=i("./bundles/oroui/js/app/plugins/base/plugin.js"),m=i.n(g).a.extend({constructor:function e(t,i){e.__super__.constructor.call(this,t,i)},enable:function(){this.enabled||(this.listenTo(this.main.collection,"request",function(){return h.a.trigger("shopping-list:request")}),this.listenTo(this.main.collection,"reset",function(){return h.a.trigger("shopping-list:refresh")}),m.__super__.enable.call(this))}}),_=m,f=i("./bundles/oroproduct/js/app/quantity-helper.js"),j=i.n(f),b=i("./bundles/oroshoppinglist/js/datagrid/row/shopping-list-row.js"),v=["subData"];function w(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function L(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?w(Object(i),!0).forEach(function(t){d()(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var y=function(e){return e.isUpcoming||e.warnings&&e.warnings.length},C=function(e){return e.errors&&e.errors.length},x=function(e){var t=L(L({},e),{},{id:e.id+u.a.uniqueId("-bind-"),notificationCell:"item",row_class_name:e.row_class_name+" notification-row",isMessage:!0,isAuxiliary:!0,row_attributes:{"aria-hidden":!0}});return e.messageModelId=t.id,t},I=function(e){return e.reduce(function(e,t){var i=t.subData,s=r()(t,v),n=[];if(y(s)&&n.push("highlight"),C(s)&&n.push("highlight-error"),i){var l=0,d=[],a=s;n.push("group-row"),i.length&&n.push("group-row-has-children"),s.row_class_name=n.join(" "),s.ids=[],s._hasVariants=!0,s._isVariant=!1,(C(s)||y(s))&&e.push(x(s)),e.push(s);var u=i.reduce(function(e,t,o){var n=["sub-row"];return t.units&&t.units[s.unit]&&d.push(t.units[s.unit].precision),i.length-1===o&&n.push("sub-row-last"),y(t)&&n.push("highlight"),C(t)&&n.push("highlight-error"),t.filteredOut?(l++,n.push("hide")):a=t,s.ids.push(t.id),t._isVariant=!0,t._groupId=s.productId,t.row_class_name=n.join(" "),t.row_attributes={"data-product-group":s.productId},e.push(t),(C(t)||y(t))&&e.push(x(t)),e},[]);s.precision=d.length?Math.max.apply(null,d):j.a.getDefaultMaxFractionDigits(),l&&(a.filteredOutData={count:l,group:{name:s.name,id:s.productId}},a.row_class_name+=" filtered-out"),e.push.apply(e,o()(u))}else n.push("single-row"),s.row_class_name=n.join(" "),e.push(s),s._hasVariants=!1,s._isVariant=!1,(C(s)||y(s))&&e.push(x(s));return e},[])},E={processDatagridOptions:function(e,t){return Object.assign(t.metadata.options,{parseResponseModels:function(e){return"data"in e?I(e.data):e},parseResponseOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,i=void 0===t?{}:t;return L({reset:!1,uniqueOnly:!0,wait:!1},i)}}),t.metadata.plugins||(t.metadata.plugins=[]),t.metadata.plugins.push(p.a,_),t.data.data=I(t.data.data),t.themeOptions=L(L({},t.themeOptions),{},{rowView:b.default}),e.resolve(),e},init:function(e,t){return t.gridPromise.done(function(e){e.collection.on("beforeRemove",function(e,t,i){e.get("_isVariant")&&(i.recountTotalRecords=!1)})}),e.resolve()}};t.default=E},"./bundles/oroshoppinglist/js/datagrid/builder/shoppinglist-rfp-confirmation-builder.js":function(e,t,i){"use strict";i.r(t);var s=i("./bundles/oroui/js/extend/backbone.js"),o=i.n(s),n=i("./bundles/oroui/js/mediator.js"),r=i.n(n),l={init:function(e,t){var i=Object.create(o.a.Events),s=t.metadata.hasEmptyMatrix;r.a.setHandler("shoppinglist:hasEmptyMatrix",function(){return s},i),t.gridPromise.done(function(t){i.listenTo(r.a,"datagrid:metadata-loaded",function(e){e===t&&(s=t.metadataModel.get("hasEmptyMatrix"))}),i.listenToOnce(t,"dispose",function(){i.stopListening(),r.a.removeHandlers(i)}),e.resolve()}).fail(function(){r.a.removeHandlers(i),e.reject()})}};t.default=l},"./bundles/oroshoppinglist/js/shopping-list-item-errors-handler.js":function(e,t,i){var s;void 0===(s=function(e){"use strict";var t=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/extend/underscore.js"),o=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroshoppinglist/templates/shopping-list-item-error.html");return"string"==typeof o&&(o=s.template(o)),function(e,i){var n=t(this.currentForm).closest("tr");n.nextAll('[data-role="error-container"]').remove(),i.length&&s.each(e,function(e){t(o({message:e})).insertAfter(n)})}}.call(t,i,t,e))||(e.exports=s)},"./bundles/oroshoppinglist/js/shoppinglist-request-quote-confirmation.js":function(e,t,i){var s;void 0===(s=function(e){"use strict";var t=i("./bundles/oroui/js/standart-confirmation.js"),s=i("./bundles/oroui/js/mediator.js"),o=t.extend({open:function(){this.isConfirmationNeeded()?this.trigger("ok"):o.__super__.open.call(this)},isConfirmationNeeded:function(){var e;try{e=!s.execute("shoppinglist:hasEmptyMatrix")}catch(t){e=this.isConfirmationNeededFromOldShoppingList()}return e},isConfirmationNeededFromOldShoppingList:function(){return!this.options.hasEmptyMatrix}});return o}.call(t,i,t,e))||(e.exports=s)}}]);